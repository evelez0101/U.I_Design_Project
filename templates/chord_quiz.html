{% extends "layout.html" %}
{% block content %}

<div class="container my-4">
    <h2 class="text-center">Standard Tuning: Open–6 Frets</h2>
 
</div>

<div class = "container" id="toggleContainer"></div>

<div class = "row mt-4">
    <div class = "col d-flex justify-content-center align-items-center">
        <button id="yourSubmitBtn" class="btn btn-primary"> Check Answer </button>
    </div>

</div>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>


<script>
    /**
     * Scans each .btn-group row and returns an array of the checked radio values.
     * If a row has no selection, it pushes null for that row.
     */
    function getRowValues() 
    {
      let values = [];
      
      // adjust selector to match your row containers, e.g. '#toggleContainer .btn-group'
      $('.btn-group').each(function() 
      {
        // find the checked input
        let checked = $(this).find('input[type=radio]:checked');
        values.push( checked.length ? checked.val() : null );
      });
      
      return values;
    }
  
    // Example usage:
    $(document).ready(function()
    {
      $('#yourSubmitBtn').on('click', function(e)
      {
        e.preventDefault();
        let rowVals = getRowValues();
        console.log(rowVals);
        // do something with rowVals...
      });
    });
</script>


<script>


    $(document).ready(function()
    {

      // Define your rows: each sub-array is the button labels for that row
      const rowsData = [
        ["E", "F", "F#", "G", "G#", "A", "A#"],  // 6th string (Low E)
        ["A", "A#", "B", "C", "C#", "D", "D#"],  // 5th string (A)
        ["D", "D#", "E", "F", "F#", "G", "G#"],  // 4th string (D)
        ["G", "G#", "A", "A#", "B", "C", "C#"],  // 3rd string (G)
        ["B", "C", "C#", "D", "D#", "E", "F"],   // 2nd string (B)
        ["E", "F", "F#", "G", "G#", "A", "A#"]   // 1st string (High e)
    ];

      let $container = $('#toggleContainer');
      
      rowsData.forEach(function(notes, rowIndex) 
      {
        // create a new btn-group div
        let $group = $('<div>', {
          class: 'btn-group btn-group-toggle mb-2',
          'data-toggle': 'buttons'
        });

        let start = ['X','Open'];

        const merged = start.concat(notes);

        // generate each button in the row
        merged.forEach(function(label, btnIndex) 
        {
          let inputId = 'row' + rowIndex + '_btn' + btnIndex;
          
          // create <label class="btn …">
          let $label = $('<label>', {
            class: 'btn btn-outline-primary',
            for: inputId
          });
          
          // create the <input type="radio">
          let $input = $('<input>', {
            type: 'radio',
            name: 'row' + rowIndex,  // unique per row
            id: inputId,
            autocomplete: 'off',
            value: label
          });

          // assemble and append
          $label.append($input).append(' ' + label);
          $group.append($label);
        });

        let $row = $('<div>', {
            class: 'row mt-2'
        });

        let $space = $('<div>', {
            class: 'col-1'
        });

        let $col = $('<div>', {
            class: 'col d-flex justify-content-center align-items-center',
        });

        // append this completed row to the container 
        //$row.append($space)
        $col.append($group)
        $row.append($col)
        $container.append($row);
      });
    });
</script>
  
{% endblock %}